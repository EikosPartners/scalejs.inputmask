{"version":3,"sources":["../src/scalejs.inputmask.js"],"names":[],"mappings":"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","file":"scalejs.inputmask.js","sourcesContent":["import ko from 'knockout';\r\nimport $ from 'jquery';\r\nimport 'jquery.inputmask';\r\nimport 'jquery.inputmask/dist/inputmask/jquery.inputmask.date.extensions';\r\nimport 'jquery.inputmask/dist/inputmask/jquery.inputmask.extensions';\r\nimport 'jquery.inputmask/dist/inputmask/jquery.inputmask.numeric.extensions';\r\nimport 'jquery.inputmask/dist/inputmask/jquery.inputmask.phone.extensions';\r\nimport 'jquery.inputmask/dist/inputmask/jquery.inputmask.regex.extensions';\r\n\r\n\r\n    var unwrap = ko.unwrap;\r\n\r\n    $.extend($.inputmask.defaults.definitions, {\r\n        u: {\r\n            validator: '[0-9A-F]',\r\n            cardinality: 1\r\n        }\r\n    });\r\n\r\n    $.extend($.inputmask.defaults.aliases, {\r\n        percent: {\r\n            alias: 'numeric',\r\n            mask: 'i[i[i[i[i[i[i]]]]]] %',\r\n            allowMinus: true,\r\n            rightAlign: false,\r\n            definitions: {\r\n                'i': {\r\n                    validator: function (chrs, maskset, pos, strict, opts) {\r\n                        var i, split, dc;\r\n\r\n                        for (i = pos - 1; i > -1; i--) {\r\n                            chrs = maskset.buffer[i] + chrs;\r\n                        }\r\n                        if(chrs.indexOf('-') === 0) {\r\n                            chrs = chrs.slice(1);\r\n                        }\r\n                        chrs = String(chrs);\r\n                        split = chrs.split('.');\r\n                        if (split.length > 2) {\r\n                            return false;\r\n                        }\r\n                        chrs = split[0];\r\n                        dc = split[1] || '';\r\n                        for (i = 3 - chrs.length; i > 0; i--) {\r\n                            chrs = '0' + chrs;\r\n                        }\r\n                        chrs += '.' + dc;\r\n                        for (i = 7 - chrs.length; i > 0; i--) {\r\n                            chrs += '0';\r\n                        }\r\n                        return /100.00|[0-0][0-9]{2}.[0-9]{3}$/.test(chrs);\r\n                    }\r\n                }\r\n            },\r\n            suffix: ' %',\r\n            greedy: false,\r\n            cardinality: 1\r\n        }\r\n    },\r\n    {\r\n        money: {\r\n            alias           : 'numeric',\r\n            groupSeparator  : ',',\r\n            autoGroup       : true,\r\n            digits          : 2,\r\n            rightAlign      : false,\r\n            greedy          : false,\r\n            allowMinus      : false,\r\n            prefix          : '$ ',\r\n            onBeforeMask    : function (value, opts) {\r\n                if (value.indexOf('.00') == -1 && value !== '') {\r\n                    return value + '.00';\r\n                }\r\n                return value;\r\n            }\r\n        }\r\n    },\r\n    {\r\n        date: {\r\n            'mask': '9[9/9[9/9999]]',\r\n            'greedy': false,\r\n            'placeholder': ''\r\n        }\r\n    });\r\n\r\n    ko.bindingHandlers.inputmask = {\r\n        init: function () {\r\n        },\r\n        update: function (\r\n            element,\r\n            valueAccessor,\r\n            allBindings,\r\n            viewModel,\r\n            bindingContext\r\n        ) {\r\n            var options = unwrap(valueAccessor()),\r\n                val = allBindings().value || allBindings().textInput || allBindings().datepicker.data,\r\n                initialVal = val.peek(),\r\n                subscription;\r\n\r\n            if(!options) {\r\n                return;\r\n            }\r\n\r\n            // removing placeholder as it breaks some input masks, i.e. dates\r\n            // options.placeholder = options.placeholder ||| ' ';\r\n            options.autoUnmask = options.autoUnmask === false ? false : true;\r\n            // inits the inputmask\r\n            $(element).inputmask(options);\r\n\r\n            if (options.autoUnmask) {\r\n\r\n                if(initialVal && initialVal.toString() !== $(element).val()) {\r\n                    console.warn('The initial value of the inputmask is not valid. The value will be mutated upon masking', initialVal, options);\r\n                }\r\n\r\n                subscription = val.subscribe(function () {\r\n                    // no matter what, setting the value on the input will trigger inputmask\r\n                    // but inputValue wont get updated appropriately if programmatically set\r\n                    val($(element).val());\r\n                })\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function() {\r\n                    subscription.dispose();\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n"]}